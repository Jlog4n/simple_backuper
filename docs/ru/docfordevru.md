# Для кого предназначено руководство?

Руководство (или документация) предназначена для тех людей, которые хотят разобраться в скрипте. Здесь я не буду дотрагиваться до простых терминов и ключевых слов, по типу `echo`, созданию переменных и др. Это вы можете прочитать в каталоге проекта - `"Дока для начинающих"`,

# Что делает скрипт?

Скрипт предназначен для резервного копирования файлов из одной директории в другую.
# Совместимость

- **Linux:** Полностью совместим.
    
- **macOS:** Полностью совместим (единственное отличие — путь к домашней директории пользователя).

*********
# Код бэкапа для Linux

```bash
#!/bin/bash

BACKUP_DIR="/home/user/backups" # ВМЕСТО user СТАВЬТЕ СВОЙ НИКНЕЙМ
SOURCE_DIR="/home/user/documents" # ВМЕСТО user СТАВЬТЕ СВОЙ НИКНЕЙМ
BACKUP_NAME="backup_$(date +%Y%m%d_%H%M%S).tar.gz"

mkdir -p "$BACKUP_DIR"

echo "Создаем бэкап..."
tar -czf "$BACKUP_DIR/$BACKUP_NAME" "$SOURCE_DIR"

if [ $? -eq 0 ]; then
    echo "Бэкап успешно создан: $BACKUP_NAME"
else
    echo "Ошибка при создании бэкапа!"
    exit 1
fi
```

## Построчный разбор

#### shebang
Указывает ядру ОС, какой интерпретатор использовать для выполнения скрипта.

#### Backup-Переменные 
1) `BACKUP_DIR` - Целевая переменная для хранения бэкапов.
2) `SOURCE_DIR` - Исходная директория, для резервного копирования файлов.
3) `BACKUP_NAME` - имя для бэкапов, генерирует их с текстом, временной меткой,  как:
`"backup_YYYYmmdd_HHMMSS.tar.gz`.
`Y` - year (год);
`m` - month (месяц);
`d` - day (день);
`H` - hour (час);
`M` - minute (час);
`S` - second (секунда).

#### создание BACKUP_DIR
изначально, у пользователя скорее всего не будет директории для хранения результата (backups), поэтому мы сделаем это за него используя `mkdir -p "$BACKUP_DIR".
* mkdir - команда для создания директорий в системе.
* mkdir-параметр `-p`  позволяет создать недостающие (не созданные ранее) директории в системе пользователя.

#### Архив
При перебросе бэкапа в backups, мы будем его архивировать в формат `gzip`. 
У команды tar (которая и создает архивы) есть комбинация параметров - `czf`, что означает: 
* `c` - создать архив.
* `z` - преобразовать в `.gzip` расширение.
* `f` - создать имя для архивного файла.
Параметр `f` будет давать имя архиву по принципу:
`"файл архива" "исходная директория"`.

#### Условная конструкция
Конструкцию можно прочитать следующим образом:
Если последнее выполненное действие ($?) равна true (0), тогда выполни
* `echo "Бэкап успешно создан: $BACKUP_NAME"`.
* `echo "Размер: $(du -h "$BACKUP_DIR/$BACKUP_NAME" | cut -f1)"`.
Иначе же верни
* `echo "Ошибка при создании бэкапа!"`.
* exit 1 (то есть верни false (1)).

  ********

# Код бэкапа для MacOS

```bash
#!/bin/bash

BACKUP_DIR="/Users/user/backups" # ВМЕСТО user СТАВЬТЕ СВОЙ НИКНЕЙМ
SOURCE_DIR="/Users/user/documents" # ВМЕСТО user СТАВЬТЕ СВОЙ НИКНЕЙМ
BACKUP_NAME="backup_$(date +%Y%m%d_%H%M%S).tar.gz"

mkdir -p "$BACKUP_DIR"

echo "Создаем бэкап..."
tar -czf "$BACKUP_DIR/$BACKUP_NAME" "$SOURCE_DIR"

if [ $? -eq 0 ]; then
    echo "Бэкап успешно создан: $BACKUP_NAME"
else
    echo "Ошибка при создании бэкапа!"
    exit 1
fi
```

Единственное различие между Linux в том, что при указании пути мы пишем не `/home/`, а `/Users/`.